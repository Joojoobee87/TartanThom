{% extends 'base.html' %} 
{% block title%}Tartan Thom Products - {{ product.name}}{% endblock %} 
{% block content %}

<h1>Products</h1>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-4">
      <img src="static/img/{{ product.image }}" alt="product-image" />
    </div>
    <div class="col-md-8">
      <h2>{{ product.name }}</h2>
      <p>{{ product.description }}</p>
      {% if product.sale_price %}
      <strike><span>£{{ product.price }}</span></strike>
      <span>£{{ product.sale_price }}</span>
      {% else %}
      <span>£{{ product.price }}</span>
      {% endif %}
      <form method="POST" action="#">
        {% csrf_token %}
        <div class="input-group">
          <input
            type="number"
            name="quantity"
            min="1"
            max="999"
            class="form-control"
            placeholder="Quantity"
          />
          <div class="input-group-btn">
            <button class="btn" type="submit">Add to basket</button>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-md-8">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a
            class="nav-link active"
            id="description-tab"
            data-toggle="tab"
            href="#description"
            role="tab"
            aria-controls="description"
            aria-selected="true"
            >Description</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            id="add-info-tab"
            data-toggle="tab"
            href="#add-info"
            role="tab"
            aria-controls="add-info"
            aria-selected="false"
            >Additional Information</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            id="reviews-tab"
            data-toggle="tab"
            href="#reviews"
            role="tab"
            aria-controls="contact"
            aria-selected="false"
            >Reviews</a
          >
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="description"
          role="tabpanel"
          aria-labelledby="description-tab"
        >
          {{ product.description }}
        </div>
        <div
          class="tab-pane fade"
          id="add-info"
          role="tabpanel"
          aria-labelledby="add-info-tab"
        >
            ...
        </div>
        <div
          class="tab-pane fade"
          id="reviews"
          role="tabpanel"
          aria-labelledby="reviews-tab"
        >
        {% if reviews %}
            {% for review in reviews %}
            {% if review.user_anonymous %}
            <div>Anonymous</div>
            {% else %}
            <div>{{ review.user.username }}</div>
            {% endif %}
            <div>{{ review.review_rating }}</div>
            <div class="stars">
                <div class="stars-filling" style="width: {{review.review_percentage}}%;"></div>
            </div>
            <div>{{ review.review_text }}</div>
            {% endfor %}
        {% else %}
            <div>There are no reviews for this product yet!</div>
        {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
